<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>集合 | GM的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="/blog/custom.css">
    <script src="/blog/custom.js"></script>
    <meta name="description" content="博观约取、厚积薄发。">
    
    <link rel="preload" href="/blog/assets/css/0.styles.0612dbff.css" as="style"><link rel="preload" href="/blog/assets/js/app.bee84098.js" as="script"><link rel="preload" href="/blog/assets/js/7.efdd77fe.js" as="script"><link rel="preload" href="/blog/assets/js/2.b9e7c59d.js" as="script"><link rel="preload" href="/blog/assets/js/1.41a6ef86.js" as="script"><link rel="preload" href="/blog/assets/js/40.59830a9f.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.2b491666.js"><link rel="prefetch" href="/blog/assets/js/11.906120bb.js"><link rel="prefetch" href="/blog/assets/js/14.2fbdeb68.js"><link rel="prefetch" href="/blog/assets/js/15.81523984.js"><link rel="prefetch" href="/blog/assets/js/16.5627e9c8.js"><link rel="prefetch" href="/blog/assets/js/17.cf799d13.js"><link rel="prefetch" href="/blog/assets/js/18.21f1f4b3.js"><link rel="prefetch" href="/blog/assets/js/19.87b970a3.js"><link rel="prefetch" href="/blog/assets/js/20.73f0a331.js"><link rel="prefetch" href="/blog/assets/js/21.108c76a9.js"><link rel="prefetch" href="/blog/assets/js/22.f6b8bd65.js"><link rel="prefetch" href="/blog/assets/js/23.8b148e1e.js"><link rel="prefetch" href="/blog/assets/js/24.f9175dcd.js"><link rel="prefetch" href="/blog/assets/js/25.29d310be.js"><link rel="prefetch" href="/blog/assets/js/26.692e69bd.js"><link rel="prefetch" href="/blog/assets/js/27.20ab0ec1.js"><link rel="prefetch" href="/blog/assets/js/28.ea8f592d.js"><link rel="prefetch" href="/blog/assets/js/29.054ab9de.js"><link rel="prefetch" href="/blog/assets/js/3.c7991857.js"><link rel="prefetch" href="/blog/assets/js/30.2962fbba.js"><link rel="prefetch" href="/blog/assets/js/31.2fc639e9.js"><link rel="prefetch" href="/blog/assets/js/32.97324ada.js"><link rel="prefetch" href="/blog/assets/js/33.23619402.js"><link rel="prefetch" href="/blog/assets/js/34.d9e34b8a.js"><link rel="prefetch" href="/blog/assets/js/35.c4f7378c.js"><link rel="prefetch" href="/blog/assets/js/36.71d98d02.js"><link rel="prefetch" href="/blog/assets/js/37.d91b968d.js"><link rel="prefetch" href="/blog/assets/js/38.aa0d0f3d.js"><link rel="prefetch" href="/blog/assets/js/39.7bcfe95b.js"><link rel="prefetch" href="/blog/assets/js/4.73e76377.js"><link rel="prefetch" href="/blog/assets/js/41.55275359.js"><link rel="prefetch" href="/blog/assets/js/42.c5cb7ad8.js"><link rel="prefetch" href="/blog/assets/js/43.5808552c.js"><link rel="prefetch" href="/blog/assets/js/44.0a5b349b.js"><link rel="prefetch" href="/blog/assets/js/45.f886f527.js"><link rel="prefetch" href="/blog/assets/js/46.614dfee5.js"><link rel="prefetch" href="/blog/assets/js/47.2f31deb0.js"><link rel="prefetch" href="/blog/assets/js/48.a91dce9c.js"><link rel="prefetch" href="/blog/assets/js/49.4e9137e6.js"><link rel="prefetch" href="/blog/assets/js/5.db29ab2c.js"><link rel="prefetch" href="/blog/assets/js/50.30ceb46d.js"><link rel="prefetch" href="/blog/assets/js/51.6f7f2382.js"><link rel="prefetch" href="/blog/assets/js/52.fe0f9006.js"><link rel="prefetch" href="/blog/assets/js/53.d214932e.js"><link rel="prefetch" href="/blog/assets/js/54.20310236.js"><link rel="prefetch" href="/blog/assets/js/55.09089f77.js"><link rel="prefetch" href="/blog/assets/js/56.d8267f56.js"><link rel="prefetch" href="/blog/assets/js/57.b34ff1f4.js"><link rel="prefetch" href="/blog/assets/js/58.f850a7fd.js"><link rel="prefetch" href="/blog/assets/js/59.f7265524.js"><link rel="prefetch" href="/blog/assets/js/6.dee0bf13.js"><link rel="prefetch" href="/blog/assets/js/60.5ae7bd7e.js"><link rel="prefetch" href="/blog/assets/js/61.d3e0fcdf.js"><link rel="prefetch" href="/blog/assets/js/62.b5045079.js"><link rel="prefetch" href="/blog/assets/js/63.f3e4d653.js"><link rel="prefetch" href="/blog/assets/js/64.cc19734f.js"><link rel="prefetch" href="/blog/assets/js/65.5be1e328.js"><link rel="prefetch" href="/blog/assets/js/66.35a11ce5.js"><link rel="prefetch" href="/blog/assets/js/67.2cd0a0af.js"><link rel="prefetch" href="/blog/assets/js/68.d4b16ecf.js"><link rel="prefetch" href="/blog/assets/js/69.830d6684.js"><link rel="prefetch" href="/blog/assets/js/70.3996d6f2.js"><link rel="prefetch" href="/blog/assets/js/71.baa8223c.js"><link rel="prefetch" href="/blog/assets/js/72.1b4f8dab.js"><link rel="prefetch" href="/blog/assets/js/73.a75e74d7.js"><link rel="prefetch" href="/blog/assets/js/8.10fb926e.js"><link rel="prefetch" href="/blog/assets/js/9.82e18295.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.6e140397.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.0612dbff.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>GM的博客</h3> <p class="description" data-v-59e6cb88>博观约取、厚积薄发。</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/head.jpg" alt="GM的博客" class="logo"> <span class="site-name">GM的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://deepjava-gm.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      GM的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/deepjava-gm" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_37883866" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>35</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="https://deepjava-gm.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      GM的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/deepjava-gm" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_37883866" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/" class="sidebar-heading clickable router-link-active"><span>构建自己的Java知识体系</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/" aria-current="page" class="sidebar-link">引言</a></li><li><a href="/blog/contact.html" class="sidebar-link">反馈</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/javabase/一、Java基础知识" class="sidebar-heading clickable"><span>Java基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/java-collection/一、Java集合概述" class="sidebar-heading clickable open active"><span>Java集合</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java-collection/一、Java集合概述.html" class="active sidebar-link">一、Java集合概述</a></li><li><a href="/blog/java-collection/二、ArrayList详解.html" class="sidebar-link">二、ArrayList详解</a></li><li><a href="/blog/java-collection/三、LinkedList详解.html" class="sidebar-link">三、LinkedList详解</a></li><li><a href="/blog/java-collection/四、CopyOnWriteArrayList详解.html" class="sidebar-link">四、CopyOnWriteArrayList详解</a></li><li><a href="/blog/java-collection/五、Stack详解.html" class="sidebar-link">五、Stack详解</a></li><li><a href="/blog/java-collection/六、HashMap详解.html" class="sidebar-link">六、HashMap详解</a></li><li><a href="/blog/java-collection/七、LinkedHashMap详解.html" class="sidebar-link">七、LinkedHashMap详解</a></li><li><a href="/blog/java-collection/八、ConcurrentHashMap详解.html" class="sidebar-link">八、ConcurrentHashMap详解</a></li><li><a href="/blog/java-collection/九、ArrayDeque详解.html" class="sidebar-link">九、ArrayDeque详解</a></li><li><a href="/blog/java-collection/十、BlockingQueue详解.html" class="sidebar-link">十、BlockingQueue详解</a></li><li><a href="/blog/java-collection/十一、PriorityQueue详解.html" class="sidebar-link">十一、PriorityQueue详解</a></li><li><a href="/blog/java-collection/十二、DelayQueue详解.html" class="sidebar-link">十二、DelayQueue详解</a></li><li><a href="/blog/java-collection/十三、ConcurrentLinkedQueue详解.html" class="sidebar-link">十三、ConcurrentLinkedQueue详解</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/java-concurrent/一、Java并发编程基础知识点" class="sidebar-heading clickable"><span>Java并发编程</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">集合</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="集合"><a href="#集合" class="header-anchor">#</a> 集合</h1> <p>集合是Java非常重要的基础知识点。</p> <h2 id="一、图解集合的继承体系-图片来源"><a href="#一、图解集合的继承体系-图片来源" class="header-anchor">#</a> 一、图解集合的继承体系？（<a href="https://www.cnblogs.com/mrhgw/p/9728065.html" target="_blank" rel="noopener noreferrer">图片来源<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</h2> <img src="/blog/images/16-1.png" alt="mixureSecure"> <h2 id="二、list-set-map三者的区别"><a href="#二、list-set-map三者的区别" class="header-anchor">#</a> 二、List,Set,Map三者的区别？</h2> <p>List、Set 是用于存放单值集合的接口 ，Map 是用于存放双值(key,value)集合的接口。</p> <ul><li><strong>List(存取有顺，可重复)：</strong>  List接口存储一组不唯一且有序的对象（存储的元素允许重复，可以有多个元素引用相同的对象）。可以通过类似于数组的下标快速查找到对 应的值。</li> <li><strong>Set(不可重复):</strong>   不允许重复的集合。不会有多个元素引用相同的对象。（注意Set只是接口，其实现类HashSet存取无序，LinkedHashSet存取有序，所以不能说Set集合存取无序）</li> <li><strong>Map(双值集合，可以用Key来进行高效搜索):</strong>    使用键值对存储。Map会维护与Key有关联的值。两个Key可以引用相同的对象，但Key不能重复，典型的Key是String类型，但也可以是任何对象。</li></ul> <h2 id="三、list接口的实现"><a href="#三、list接口的实现" class="header-anchor">#</a> 三、List接口的实现</h2> <h3 id="_3-1、arraylist-、-linkedlist、vector"><a href="#_3-1、arraylist-、-linkedlist、vector" class="header-anchor">#</a> 3.1、Arraylist 、 LinkedList、Vector</h3> <ul><li><strong>①、Arraylist ：</strong> 底层数据结构是Object 数组，可以存null(不建议存null值，可能出现NPE)，线程不安全。</li> <li><strong>②、LinkedList：</strong> 底层数据结构是双向链表 ，可以存null(不建议存null值，可能出现NPE)，线程不安全。</li> <li><strong>③、Vector ：</strong>： 底层数据结构是Object 数组，可以存null(不建议存null值，可能出现NPE)，线程安全，但是不建议使用，因为对外提供的全部是同步方法(被synchronized修饰)，可能出现性能问题。</li></ul> <h3 id="_3-2、arraylist-、-linkedlist、vector-三者的区别"><a href="#_3-2、arraylist-、-linkedlist、vector-三者的区别" class="header-anchor">#</a> 3.2、Arraylist 、 LinkedList、Vector 三者的区别?</h3> <table><thead><tr><th>特性</th> <th>ArrayList</th> <th>LinkedList</th> <th>Vector</th></tr></thead> <tbody><tr><td>底层数据结构</td> <td>Object数组</td> <td>双向链表（JDK1.7之前为循环链表，JDK1.7之后取消循环）</td> <td>Object数组</td></tr> <tr><td>插入和删除元素是否受位置影响</td> <td>受影响。尾部插入/删除时间复杂度O(1)，指定位置O(n-i)</td> <td>不受影响。尾部插入/删除时间复杂度O(1)，指定位置O(n)</td> <td>受影响。尾部插入/删除时间复杂度O(1)，指定位置O(n-i)</td></tr> <tr><td>内存空间占用</td> <td>结尾预留一定容量空间</td> <td>每个元素需要额外空间存放前驱和后继指针</td> <td>结尾预留一定容量空间</td></tr> <tr><td>是否支持快速随机访问</td> <td>支持（实现了RandomAccess接口）</td> <td>不支持（需要从头遍历或从尾部遍历）</td> <td>支持（实现了RandomAccess接口）</td></tr> <tr><td>线程安全性</td> <td>线程不安全</td> <td>线程不安全</td> <td>线程安全（public方法使用了synchronized修饰）</td></tr> <tr><td>性能</td> <td>访问和遍历性能高，随机插入和删除性能受位置影响</td> <td>随机插入和删除性能高，访问和遍历性能低</td> <td>访问和遍历性能高，但由于同步开销性能低于ArrayList</td></tr> <tr><td>适用场景</td> <td>频繁访问、遍历操作较多，插入、删除操作较少的场景</td> <td>频繁随机插入、删除操作较多，访问、遍历操作较少的场景</td> <td>多线程操作需要保证线程安全的场景</td></tr> <tr><td>替代方案</td> <td>如果需要线程安全，可使用CopyOnWriteArrayList</td> <td>如果需要线程安全，可使用ConcurrentLinkedDeque</td> <td>CopyOnWriteArrayList（更好的线程安全集合）</td></tr></tbody></table> <h3 id="_3-3、对randomaccess接口的理解"><a href="#_3-3、对randomaccess接口的理解" class="header-anchor">#</a> 3.3、对RandomAccess接口的理解</h3> <p>     Java 中的 RandomAccess 是一个标记接口（marker interface），它没有任何方法，只是用来标识某个类具备快速随机访问功能。这个接口主要是用在集合框架中的，特别是 List 接口的实现类上。</p> <p><strong>为什么需要 RandomAccess 接口？</strong>
在 Java 的集合框架中，有些集合是可以高效地进行随机访问的，而有些集合只能高效地进行顺序访问。比如：</p> <p>数组（Array）和 ArrayList：可以通过索引在常数时间内（O(1)）访问任意元素，适合随机访问。
链表（LinkedList）：需要从头或尾开始遍历，查找某个特定位置的元素需要线性时间（O(n)），不适合随机访问。</p> <p><strong>JDK中是如何使用RandomAccess 接口的？</strong>
     JDK 中使用 RandomAccess 接口的主要目的是通过识别集合是否具备快速随机访问能力来优化某些算法的执行。在 JDK 内部，很多方法都会检查传入的 List 是否实现了 RandomAccess 接口，然后根据情况选择最优的访问策略。
<strong>例如：</strong>
     Collections.binarySearch 方法会对有序列表进行二分查找。如果列表实现了 RandomAccess 接口，则直接使用基于索引的二分查找，否则使用基于迭代器的方式。</p> <h2 id="四、set接口的实现"><a href="#四、set接口的实现" class="header-anchor">#</a> 四、Set接口的实现</h2> <h3 id="_4-1、hashset、linkedhashset、treeset"><a href="#_4-1、hashset、linkedhashset、treeset" class="header-anchor">#</a> 4.1、HashSet、LinkedHashSet、TreeSet</h3> <ul><li><p><strong>①、HashSet：</strong> 保存的元素无序且唯一。底层是基于 HashMap 实现的，利用 HashMap的key来保存元素。</p></li> <li><p><strong>②、LinkedHashSet：</strong> 保存的元素有序且唯一。底层是基于 LinkedHashMap 实现的，是HashSet的子类。</p></li> <li><p><strong>③、TreeSet：</strong> 保存的元素有序且唯一。底层是基于 红黑树(自平衡的排序二叉树)。</p></li></ul> <p>注意点：
        HashSet、LinkedHashSet 和 TreeSet 都是 Set 接口的实现类，都能保证元素唯一，且是线程不安全的。</p> <h3 id="_4-2、hashset、linkedhashset-、-treeset-三者的区别"><a href="#_4-2、hashset、linkedhashset-、-treeset-三者的区别" class="header-anchor">#</a> 4.2、HashSet、LinkedHashSet 、 TreeSet 三者的区别？</h3> <table><thead><tr><th>特性</th> <th>HashSet</th> <th>LinkedHashSet</th> <th>TreeSet</th></tr></thead> <tbody><tr><td>存储顺序</td> <td>无序存储</td> <td>按插入顺序存储</td> <td>按自然顺序或比较器顺序存储</td></tr> <tr><td>底层实现</td> <td>哈希表（HashMap）</td> <td>哈希表（HashMap）+ 双向链表</td> <td>红黑树（TreeMap）</td></tr> <tr><td>插入/删除/查找复杂度</td> <td>O(1)</td> <td>O(1)（维护链表使性能略低于 HashSet）</td> <td>O(log n)</td></tr> <tr><td>唯一性保证方式</td> <td>hashCode() 和 equals()</td> <td>hashCode() 和 equals()</td> <td>compareTo() 或 Comparator</td></tr> <tr><td>适用场景</td> <td>高效查找和修改，对顺序无要求</td> <td>保持插入顺序，高效查找和修改</td> <td>需要排序的场景</td></tr></tbody></table> <h3 id="_4-3、hashset如何检查重复"><a href="#_4-3、hashset如何检查重复" class="header-anchor">#</a> 4.3、HashSet如何检查重复</h3> <p>把对象加入HashSet时，HashSet会先计算对象的hashcode值来判断对象加入的位置，同时也会与其他加入的对象的hashcode值作比较，如果没有相符的hashcode，HashSet会假设对象没有重复出现。但是如果发现有相同hashcode值的对象，这时会调用equals()方法来检查hashcode相等的对象是否真的相同。如果两者相同，HashSet就不会让加入操作成功。</p> <p><strong>hashCode()与equals()的相关规定：</strong>
如果两个对象相等，则hashcode一定也是相同的
两个对象相等,equals方法返回true
两个对象有相同的hashcode值，它们也不一定是相等的
综上，equals方法被覆盖过，则hashCode方法也必须被覆盖
hashCode()的默认行为是对堆上的对象产生独特值。如果没有重写hashCode()，则该class的两个对象无论如何都不会相等（即使这两个对象指向相同的数据）。</p> <h2 id="五、map接口的实现"><a href="#五、map接口的实现" class="header-anchor">#</a> 五、Map接口的实现</h2> <h3 id="_5-1、hashmap、linkedhashmap、treemap、hashtable"><a href="#_5-1、hashmap、linkedhashmap、treemap、hashtable" class="header-anchor">#</a> 5.1、HashMap、LinkedHashMap、TreeMap、Hashtable</h3> <ul><li><strong>①、HashMap：</strong> 平时使用最多的Map，存储键值对(key,value)，不保证插入顺序，同时需要注意 value可能为null。</li> <li><strong>②、LinkedHashMap：</strong> 如果需要保证插入的顺序，大部分情况下使用LinkedHashMap，同时需要注意 value可能为null。</li> <li><strong>③、TreeMap：</strong> 一般在需要特定的排序规则时使用TreeMap，注意TreeMap不允许 null 键或 null 值。</li> <li><strong>④、Hashtable：</strong> 基本上不再使用，如果需要保证线程安全 一般使用ConcurrentHashMap。</li></ul> <h3 id="_5-2、hashmap、linkedhashmap、treemap、hashtable对比"><a href="#_5-2、hashmap、linkedhashmap、treemap、hashtable对比" class="header-anchor">#</a> 5.2、HashMap、LinkedHashMap、TreeMap、Hashtable对比</h3> <table><thead><tr><th>特性</th> <th>HashMap</th> <th>LinkedHashMap</th> <th>TreeMap</th> <th>Hashtable</th></tr></thead> <tbody><tr><td>存储顺序</td> <td>无序</td> <td>按插入顺序存储</td> <td>按键的自然顺序或比较器顺序存储</td> <td>无序</td></tr> <tr><td>底层实现</td> <td>哈希表（数组 + 链表/红黑树JDK.18）</td> <td>哈希表（数组 + 链表/红黑树JDK1.8） + 双向链表</td> <td>红黑树（平衡二叉搜索树）</td> <td>哈希表（数组 + 链表）</td></tr> <tr><td>线程安全性</td> <td>非线程安全</td> <td>非线程安全</td> <td>非线程安全</td> <td>线程安全</td></tr> <tr><td>是否允许 null 键值</td> <td>允许一个 null 键和多个 null 值</td> <td>允许一个 null 键和多个 null 值</td> <td>不允许 null 键或 null 值</td> <td>不允许 null 键或 null 值</td></tr> <tr><td>性能</td> <td>插入、删除、查找操作时间复杂度为 O(1)</td> <td>插入、删除、查找操作时间复杂度为 O(1)</td> <td>插入、删除、查找操作时间复杂度为 O(log n)</td> <td>插入、删除、查找操作时间复杂度为 O(1)</td></tr> <tr><td>适用场景</td> <td>高效查找和修改，对顺序无要求</td> <td>保持插入顺序，高效查找和修改</td> <td>需要按键排序的场景</td> <td>需要线程安全，且不关心顺序的场景  （不建议使用，线程安全的Map建议使用ConcurrentHashMap）</td></tr></tbody></table> <h3 id="_5-3、map的五种遍历方式"><a href="#_5-3、map的五种遍历方式" class="header-anchor">#</a> 5.3、Map的五种遍历方式</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestA</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;博美&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;四眼&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;哈士奇&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;大黄&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;田园犬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ========== map遍历方式一： for循环 EntrySet</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> key <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key: &quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot; value: &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// ========== map遍历方式二： for循环 KeySet</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key: &quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot; value: &quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// ========== map遍历方式三：  EntrySet 迭代器</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key: &quot;</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; value: &quot;</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// ========== map遍历方式四：  KeySet 迭代器</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keyIterator <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>keyIterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> key <span class="token operator">=</span> keyIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key: &quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot; value: &quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// ========== map遍历方式五：  Lambda 表达式 forEach   （推荐使用，简单好记）</span>
        map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key: &quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot; value: &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>推荐使用</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
  	<span class="token comment">// do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="六、用comparator和comparable进行自定义排序"><a href="#六、用comparator和comparable进行自定义排序" class="header-anchor">#</a> 六、用Comparator和Comparable进行自定义排序</h2> <p><strong>先看下二者的区别：</strong></p> <table><thead><tr><th>特性</th> <th>Comparable</th> <th>Comparator</th></tr></thead> <tbody><tr><td>所在包</td> <td>java.lang</td> <td>java.util</td></tr> <tr><td>比较方法</td> <td>compareTo(T o)</td> <td>compare(T o1, T o2)</td></tr> <tr><td>是否需要修改类</td> <td>需要修改比较的类本身</td> <td>不修改比较的类，通常在外部定义</td></tr> <tr><td>适用场景</td> <td>类需要有固定的排序方式时</td> <td>类不修改自身排序逻辑的情况时,使用比较灵活</td></tr></tbody></table> <p><strong>代码示例：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestA</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> dogs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;四眼&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;吃馒头喝稀饭&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;吃骨头&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;大黄&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;吃烤鸭屁股&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;跳跳&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;跳&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用 Comparable</span>
        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> dogss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogss<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;哈士奇&quot;</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&quot;啃沙发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogss<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;拉布拉多&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;拉得多&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogss<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;博美&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;吃帝王蟹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogss<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;泰迪&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;蹦迪&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用 Comparator</span>
        dogss<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Integer</span> age1 <span class="token operator">=</span> o1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Integer</span> age2 <span class="token operator">=</span> o2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>age1 <span class="token operator">&gt;</span> age2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>age1 <span class="token operator">&lt;</span> age2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> hobbyL1 <span class="token operator">=</span> o1<span class="token punctuation">.</span><span class="token function">getHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> hobbyL2 <span class="token operator">=</span> o2<span class="token punctuation">.</span><span class="token function">getHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>hobbyL1 <span class="token operator">&gt;</span> hobbyL2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hobbyL1 <span class="token operator">&lt;</span> hobbyL2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dogss<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> hobby<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> hobby<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hobby <span class="token operator">=</span> hobby<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hobby<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHobby</span><span class="token punctuation">(</span><span class="token class-name">String</span> hobby<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hobby <span class="token operator">=</span> hobby<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Dog{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, age=&quot;</span> <span class="token operator">+</span> age <span class="token operator">+</span>
                <span class="token string">&quot;, hobby='&quot;</span> <span class="token operator">+</span> hobby <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 先按照年龄正序排序</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">&gt;</span> o<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">&lt;</span> o<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 再按照hobby属性值的长度正序排序</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> o<span class="token punctuation">.</span><span class="token function">getHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> o<span class="token punctuation">.</span><span class="token function">getHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 如何前面两种情况都相等 则直接返回相等</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="七、queue、deque、blockingqueue接口的实现"><a href="#七、queue、deque、blockingqueue接口的实现" class="header-anchor">#</a> 七、Queue、Deque、BlockingQueue接口的实现</h2> <h3 id="_7-1、queue-、-deque、blockingqueue-接口的区别"><a href="#_7-1、queue-、-deque、blockingqueue-接口的区别" class="header-anchor">#</a> 7.1、Queue 、 Deque、BlockingQueue 接口的区别</h3> <table><thead><tr><th>特性</th> <th>Queue</th> <th>Deque</th> <th>BlockingQueue</th></tr></thead> <tbody><tr><td>定义</td> <td>先进先出（FIFO）的队列</td> <td>双端队列，可以先进先出（FIFO）或后进先出（LIFO）</td> <td>支持阻塞操作的队列，用于生产者-消费者模型</td></tr> <tr><td>插入元素</td> <td>只能从队尾插入</td> <td>可以从队头和队尾插入</td> <td>只能从队尾插入</td></tr> <tr><td>移除元素</td> <td>只能从队头移除</td> <td>可以从队头和队尾移除</td> <td>只能从队头移除</td></tr> <tr><td>阻塞操作</td> <td>不支持</td> <td>不支持</td> <td>支持插入和移除时阻塞操作</td></tr> <tr><td>常用方法</td> <td><code>add(e)</code>, <code>offer(e)</code>, <code>remove()</code>, <code>poll()</code>, <code>element()</code>, <code>peek()</code></td> <td><code>addFirst(e)</code>, <code>addLast(e)</code>, <code>offerFirst(e)</code>, <code>offerLast(e)</code>, <code>removeFirst()</code>, <code>removeLast()</code>, <code>pollFirst()</code>, <code>pollLast()</code>, <code>getFirst()</code>, <code>getLast()</code>, <code>peekFirst()</code>, <code>peekLast()</code></td> <td><code>put(e)</code>, <code>offer(e, timeout, unit)</code>, <code>take()</code>, <code>poll(timeout, unit)</code></td></tr> <tr><td>常用实现（非线程安全）</td> <td><code>LinkedList</code>, <code>PriorityQueue</code>, <code>ArrayDeque</code></td> <td><code>LinkedList</code>, <code>ArrayDeque</code></td> <td></td></tr> <tr><td>常用实现（线程安全）</td> <td><code>ConcurrentLinkedQueue</code>, <code>LinkedBlockingQueue</code>, <code>ArrayBlockingQueue</code>, <code>PriorityBlockingQueue</code>, <code>DelayQueue</code>, <code>SynchronousQueue</code>, <code>LinkedTransferQueue</code></td> <td><code>ConcurrentLinkedDeque</code>, <code>LinkedBlockingDeque</code></td> <td><code>LinkedBlockingQueue</code>, <code>ArrayBlockingQueue</code>, <code>PriorityBlockingQueue</code>, <code>DelayQueue</code>, <code>SynchronousQueue</code>, <code>LinkedTransferQueue</code></td></tr> <tr><td>适用场景</td> <td>通常用于简单的FIFO队列实现</td> <td>需要双端插入和删除操作时使用</td> <td>适用于需要阻塞操作的生产者-消费者模型</td></tr></tbody></table> <h3 id="_7-2、linkedlist-、arraydeque、priorityqueue"><a href="#_7-2、linkedlist-、arraydeque、priorityqueue" class="header-anchor">#</a> 7.2、LinkedList 、ArrayDeque、PriorityQueue</h3> <ul><li><strong>①、LinkedList ：</strong>  LinkedList 是基于链表的数据结构，实现了 <code>List</code> 和 <code>Deque</code> 接口，可以用作列表、队列(Queue)和双端队列（Deque）。</li> <li><strong>②、ArrayDeque：</strong> ArrayDeque是一个基于数组和双指针的双端队列，提供了可变大小的数组实现（存在动态扩容），支持 <code>Deque</code> 接口的所有操作。还可以用于实现栈数据结构。<strong>注意：ArrayDeque不允许存null值。</strong></li> <li><strong>③、PriorityQueue ：</strong>  PriorityQueue 是一个基于优先级堆（默认小顶堆）数据结构实现的无界优先级队列，元素按自然顺序或指定的比较器排序。<strong>注意：PriorityQueue 不允许存null值。</strong> 插入和删除元素的时间复杂度为 O(log n)。比较适合需要维护按优先级顺序处理元素的场景，或者需要动态获取最小（或最大）元素的场景。</li></ul> <h3 id="_7-3、linkedlist-、arraydeque、priorityqueue对比"><a href="#_7-3、linkedlist-、arraydeque、priorityqueue对比" class="header-anchor">#</a> 7.3、LinkedList 、ArrayDeque、PriorityQueue对比</h3> <table><thead><tr><th>特性</th> <th>LinkedList</th> <th>ArrayDeque</th> <th>PriorityQueue</th></tr></thead> <tbody><tr><td>底层数据结构</td> <td>双向链表</td> <td>动态数组 和 双指针</td> <td>优先级堆（最小堆）</td></tr> <tr><td>实现接口</td> <td>List, Deque</td> <td>Deque</td> <td>Queue</td></tr> <tr><td>插入效率</td> <td>对中间元素插入效率高</td> <td>队头和队尾插入效率高</td> <td>插入元素时间复杂度为 O(log n)</td></tr> <tr><td>删除效率</td> <td>对中间元素删除效率高</td> <td>队头和队尾删除效率高</td> <td>删除最小元素时间复杂度为 O(log n)</td></tr> <tr><td>随机访问效率</td> <td>效率低，需要从头或尾遍历</td> <td>效率一般，不如 ArrayList</td> <td>不支持高效的随机访问</td></tr> <tr><td>是否支持双端队列</td> <td>是</td> <td>是</td> <td>否</td></tr> <tr><td>元素排序</td> <td>按插入顺序</td> <td>按插入顺序</td> <td>按自然顺序或指定的比较器排序</td></tr> <tr><td>常用方法</td> <td><code>add(int index, E element)</code>, <code>remove(int index)</code>, <code>get(int index)</code>, <code>addFirst(E e)</code>, <code>addLast(E e)</code>, <code>removeFirst()</code>, <code>removeLast()</code></td> <td><code>addFirst(E e)</code>, <code>addLast(E e)</code>, <code>removeFirst()</code>, <code>removeLast()</code>, <code>peekFirst()</code>, <code>peekLast()</code></td> <td><code>add(E e)</code>, <code>offer(E e)</code>, <code>remove()</code>, <code>poll()</code>, <code>peek()</code></td></tr> <tr><td>线程安全性</td> <td>非线程安全，需要手动同步</td> <td>非线程安全，需要手动同步</td> <td>非线程安全，需要手动同步</td></tr> <tr><td>适用场景</td> <td>需要频繁插入和删除操作的场景，或需要使用双端队列功能的场景</td> <td>需要高效队头和队尾插入删除操作的场景，或需要使用双端队列功能的场景</td> <td>需要维护按优先级顺序处理元素的场景，或需要动态获取最小（或最大）元素的场景</td></tr></tbody></table> <h3 id="_7-4、blockingqueue的实现"><a href="#_7-4、blockingqueue的实现" class="header-anchor">#</a> 7.4、BlockingQueue的实现</h3> <ul><li><strong>①、ArrayBlockingQueue：</strong>   使用线程池时相信大家都用过这个容器，ArrayBlockingQueue是一个基于数组的有界阻塞队列。队列的容量是在创建时指定的。支持公平和非公平锁的访问机制(默认非公平)。</li> <li><strong>②、LinkedBlockingQueue：</strong>   LinkedBlockingQueue 是一个基于链表的可选有界阻塞队列。如果没有指定容量，则默认大小为<code>Integer.MAX_VALUE</code>，使用时建议指定大小。仅支持非公平锁访问机制。</li> <li><strong>③、PriorityBlockingQueue：</strong>   是一个支持优先级排序的无界阻塞队列。元素按照自然顺序或提供的比较器排序。注意：不能插入 null值，且构造时必须传入比较器Comparator或者保存的元素实现Comparable接口。</li> <li><strong>④、DelayQueue：</strong>   DelayQueue是一个支持延时获取元素的无界阻塞队列。队列中的元素必须实现 <code>Delayed</code> 接口，只有在延迟期满时才能从队列中获取到元素。</li> <li><strong>⑤、SynchronousQueue：</strong> 这个队列是一个特殊的阻塞队列，它不存储元素。每个插入操作必须等待另一个线程进行相应的删除操作，反之亦然。所以这个队列通常被用来实现线程之前的同步。</li> <li><strong>⑥、LinkedTransferQueue：</strong> 是一个基于链表的无界阻塞队列，提供 <code>TransferQueue</code> 接口的实现，在<code>BlockingQueue</code>接口的基础上又封装了一层。与其他阻塞队列相比，<code>LinkedTransferQueue</code> 提供了更多的控制选项，尤其是 <code>transfer</code> 方法，可以实现多个线程之间的直接数据交换。适用于多生产者多消费者场景。</li></ul> <h3 id="_7-5、代码示例"><a href="#_7-5、代码示例" class="header-anchor">#</a> 7.5、代码示例</h3> <p>由于Queue、Deque、BlockingQueue接口的实现在实际项目的业务操作中使用的不多，所以记录一下简单的代码使用示例，方便后续查阅。</p> <h4 id="arraydeque、linkedlist、priorityqueue代码示例"><a href="#arraydeque、linkedlist、priorityqueue代码示例" class="header-anchor">#</a> ArrayDeque、LinkedList、PriorityQueue代码示例：</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayDeque</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">PriorityQueue</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestA</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ============= LinkedList使用示例 ===================</span>
        <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> dogs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 在队尾插入元素</span>
        dogs<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogs<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;四眼&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 在队头插入元素</span>
        dogs<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;大黄&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LinkedList: &quot;</span> <span class="token operator">+</span> dogs<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 移除队头元素</span>
        <span class="token class-name">Dog</span> firstDog <span class="token operator">=</span> dogs<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;移除队头元素: &quot;</span> <span class="token operator">+</span> firstDog<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 移除队尾元素</span>
        <span class="token class-name">Dog</span> lastDog <span class="token operator">=</span> dogs<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;移除队尾元素: &quot;</span> <span class="token operator">+</span> lastDog<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 打印队列</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LinkedList 移除元素后: &quot;</span> <span class="token operator">+</span> dogs<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ============= ArrayDeque 使用示例 参考LinkedList ===================</span>
        <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> dogsArrayDeque <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        dogsArrayDeque<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogsArrayDeque<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;四眼&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogsArrayDeque<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;二哈&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dogsArrayDeque<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取队列头部第一个元素</span>
        <span class="token class-name">Dog</span> dogFirst <span class="token operator">=</span> dogsArrayDeque<span class="token punctuation">.</span><span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;队列头部第一个元素: &quot;</span> <span class="token operator">+</span> dogFirst<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取队列尾部第一个元素</span>
        <span class="token class-name">Dog</span> dogLast <span class="token operator">=</span> dogsArrayDeque<span class="token punctuation">.</span><span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;获取队列尾部第一个元素: &quot;</span> <span class="token operator">+</span> dogLast<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 移除队列头部第一个元素 (如果队列为空则返回 null元素)</span>
        dogsArrayDeque<span class="token punctuation">.</span><span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 移除队列头部第一个元素 (如果队列为空则 抛出异常 NoSuchElementException)</span>
        dogsArrayDeque<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// ============= PriorityQueue  使用示例  ===================</span>
        <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> dogsPriorityQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>dog1<span class="token punctuation">,</span> dog2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 按照狗的年龄从小到大排序</span>
            <span class="token class-name">Integer</span> age1 <span class="token operator">=</span> dog1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Integer</span> age2 <span class="token operator">=</span> dog2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> age1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>age2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 插入元素  add 方法插入成功 返回true  插入失败 抛异常 IllegalStateException (尤其是有界队列满之后)</span>
        dogsPriorityQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;大哈&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogsPriorityQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;二哈&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dogsPriorityQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;细狗&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 插入元素 offer 方法插入成功 返回true  插入失败返回 false  不会抛异常</span>

        <span class="token comment">// 在PriorityQueue无界队列中 实际上 add方法 就是调用的 offer方法</span>
        dogsPriorityQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;柯基&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 打印队列  注意点： PriorityQueue 的 toString 方法是从 AbstractCollection 类继承的，并没有重写。</span>
        <span class="token comment">// 这意味着它直接返回内部数组的内容，而不展示实际的优先级顺序。 实际上展示的是 插入顺序。</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;PriorityQueue: &quot;</span> <span class="token operator">+</span> dogsPriorityQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 依次移除并打印队头元素</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>dogsPriorityQueue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 每次都是 年龄最小的被移除</span>
            <span class="token class-name">Dog</span> dog <span class="token operator">=</span> dogsPriorityQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Removed: &quot;</span> <span class="token operator">+</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Dog{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, age=&quot;</span> <span class="token operator">+</span> age <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="blockingqueue的一些实现类代码示例"><a href="#blockingqueue的一些实现类代码示例" class="header-anchor">#</a> BlockingQueue的一些实现类代码示例</h4> <h5 id="arrayblockingqueue-和-linkedblockingqueue代码示例"><a href="#arrayblockingqueue-和-linkedblockingqueue代码示例" class="header-anchor">#</a> ArrayBlockingQueue 和 LinkedBlockingQueue代码示例：</h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

        <span class="token comment">// ============== ArrayBlockingQueue 和 LinkedBlockingQueue的使用示例 (大致相同)</span>

        <span class="token comment">// 创建一个容量为3的ArrayBlockingQueue</span>
        <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> arrayQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ============== 示例1：ArrayBlockingQueue ======================</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ArrayBlockingQueue 示例:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        arrayQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        arrayQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;二哈&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        arrayQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;四眼&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 试图插入第四个元素（将阻塞线程）</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;尝试插入第四个元素到已经满的ArrayBlockingQueue...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                arrayQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;大黄&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻塞直到队列有空闲空间</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;大黄 插入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 移除一个元素</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等待2秒以模拟处理时间</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;从ArrayBlockingQueue中移除第一个元素: &quot;</span> <span class="token operator">+</span> arrayQueue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 执行结果： </span>
        
        <span class="token comment">// ArrayBlockingQueue 示例:</span>
        <span class="token comment">//尝试插入第四个元素到已经满的ArrayBlockingQueue...</span>
        <span class="token comment">//从ArrayBlockingQueue中移除第一个元素: Dog{name='秀逗', age=8}</span>
        <span class="token comment">//大黄 插入成功</span>

    <span class="token punctuation">}</span>
</code></pre></div><h5 id="priorityblockingqueue代码示例"><a href="#priorityblockingqueue代码示例" class="header-anchor">#</a> PriorityBlockingQueue代码示例：</h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

        <span class="token comment">// 创建一个PriorityBlockingQueue，使用自定义的比较器按年龄排序</span>
        <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span> priorityQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>dog1<span class="token punctuation">,</span> dog2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Integer</span> age1 <span class="token operator">=</span> dog1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Integer</span> age2 <span class="token operator">=</span> dog2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> age1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>age2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 插入元素</span>
        priorityQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        priorityQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;二哈&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        priorityQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;四眼&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        priorityQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;大黄&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 打印队列内容  注意：PriorityBlockingQueue 重写了 toString 方法，展示了内部元素的优先级顺序(比较器比较后的顺序)。</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;PriorityBlockingQueue: &quot;</span> <span class="token operator">+</span> priorityQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 依次移除并打印队头元素（按年龄排序）</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>priorityQueue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Dog</span> dog <span class="token operator">=</span> priorityQueue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;移除: &quot;</span> <span class="token operator">+</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 试图从空队列中取元素（将阻塞线程）</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;从空的PriorityBlockingQueue中取元素...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Dog</span> dog <span class="token operator">=</span> priorityQueue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻塞直到队列有新元素</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;从PriorityBlockingQueue中取到了元素: &quot;</span> <span class="token operator">+</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 插入新元素以解除阻塞</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等待2秒以模拟处理时间</span>
        priorityQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;巴豆&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;巴豆加入了PriorityBlockingQueue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 运行结果 </span>
        
        <span class="token comment">// PriorityBlockingQueue: [Dog{name='二哈', age=2}, Dog{name='大黄', age=4}, Dog{name='四眼', age=5}, Dog{name='秀逗', age=8}]</span>
        <span class="token comment">//移除: Dog{name='二哈', age=2}</span>
        <span class="token comment">//移除: Dog{name='大黄', age=4}</span>
        <span class="token comment">//移除: Dog{name='四眼', age=5}</span>
        <span class="token comment">//移除: Dog{name='秀逗', age=8}</span>
        <span class="token comment">//从空的PriorityBlockingQueue中取元素...</span>
        <span class="token comment">//巴豆加入了PriorityBlockingQueue</span>
        <span class="token comment">//从PriorityBlockingQueue中取到了元素: Dog{name='巴豆', age=1}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>注意点：</strong>
        PriorityBlockingQueue 和 PriorityQueue 均在取出元素时按优先级顺序排列(比较器规则排序），但 toString 方法展示的内容有所不同。 PriorityBlockingQueue 的 toString 展示了排序后的内容，而 PriorityQueue 的 toString 则展示了插入顺序的内容。
PriorityQueue 的 toString 方法是从 AbstractCollection 类继承的，并没有重写。这意味着它直接返回内部数组的内容，而不展示实际的优先级顺序。PriorityBlockingQueue 重写了 toString 方法，展示了内部元素的优先级顺序。</p> <h5 id="delayqueue代码示例"><a href="#delayqueue代码示例" class="header-anchor">#</a> DelayQueue代码示例：</h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">DelayQueue</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Delayed</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestA</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个DelayQueue</span>
        <span class="token class-name">DelayQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DelayedDog</span><span class="token punctuation">&gt;</span></span> delayQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DelayQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 插入元素，设置不同的延迟时间</span>
        delayQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DelayedDog</span><span class="token punctuation">(</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        delayQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DelayedDog</span><span class="token punctuation">(</span><span class="token string">&quot;四眼&quot;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        delayQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DelayedDog</span><span class="token punctuation">(</span><span class="token string">&quot;二哈&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 打印队列内容，仅仅是插入顺序</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;DelayQueue: &quot;</span> <span class="token operator">+</span> delayQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 依次取出元素</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>delayQueue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DelayedDog</span> dog <span class="token operator">=</span> delayQueue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Removed from DelayQueue: &quot;</span> <span class="token operator">+</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 执行结果</span>
        <span class="token comment">// DelayQueue: [DelayedDog{name='二哈', delayTime=2000}, DelayedDog{name='秀逗', delayTime=8000}, DelayedDog{name='四眼', delayTime=5000}]</span>
        <span class="token comment">//Removed from DelayQueue: DelayedDog{name='二哈', delayTime=2000}</span>
        <span class="token comment">//Removed from DelayQueue: DelayedDog{name='四眼', delayTime=5000}</span>
        <span class="token comment">//Removed from DelayQueue: DelayedDog{name='秀逗', delayTime=8000}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 实现 Delayed 接口</span>
<span class="token keyword">class</span> <span class="token class-name">DelayedDog</span> <span class="token keyword">implements</span> <span class="token class-name">Delayed</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>        <span class="token comment">// 狗的名字</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> delayTime<span class="token punctuation">;</span>     <span class="token comment">// 延迟时间，以毫秒为单位</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> expire<span class="token punctuation">;</span>        <span class="token comment">// 到期时间点，以毫秒为单位</span>

    <span class="token comment">// 构造方法，传入狗的名字和延迟时间（毫秒）</span>
    <span class="token keyword">public</span> <span class="token class-name">DelayedDog</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">long</span> delayTimeInMillis<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>delayTime <span class="token operator">=</span> delayTimeInMillis<span class="token punctuation">;</span>
        <span class="token comment">// 计算到期时间点，当前时间加上延迟时间</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expire <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> delayTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取剩余延迟时间，以给定时间单位表示</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getDelay</span><span class="token punctuation">(</span><span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 计算剩余时间，单位为毫秒</span>
        <span class="token keyword">long</span> remainingTime <span class="token operator">=</span> expire <span class="token operator">-</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将剩余时间转换为指定单位</span>
        <span class="token keyword">return</span> unit<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>remainingTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 比较两个 DelayedDog 对象的顺序</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Delayed</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 强制转换为 DelayedDog 类型</span>
        <span class="token class-name">DelayedDog</span> otherDog <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DelayedDog</span><span class="token punctuation">)</span> other<span class="token punctuation">;</span>
        <span class="token comment">// 比较两个对象的到期时间点，返回比较结果</span>
        <span class="token keyword">return</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>expire<span class="token punctuation">,</span> otherDog<span class="token punctuation">.</span>expire<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 返回 DelayedDog 对象的字符串表示形式</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;DelayedDog{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, delayTime=&quot;</span> <span class="token operator">+</span> delayTime <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>注意点：</strong></p> <p>getDelay() 方法返回的结果分为三种情况，分别对应着元素的状态：</p> <ul><li><p>正数：
如果 getDelay() 方法返回的延迟时间是一个正数，表示元素还需要等待一段时间才能被取出。<br>
这意味着元素的延迟时间还没有到达，处于等待状态，调用 take() 或 poll() 方法时会被阻塞，直到延迟时间到达。</p></li> <li><p>零：<br>
如果 getDelay() 方法返回的延迟时间是零，表示元素的延迟时间已经到达或者已经过去。<br>
这意味着元素可以被立即取出，调用 take() 或 poll() 方法会立即返回该元素。</p></li> <li><p>负数：<br>
如果 getDelay() 方法返回的延迟时间是一个负数，表示元素的延迟时间已经过去，但是元素还没有被取出。<br>
这种情况可能是因为延迟队列中的元素延迟时间被手动修改，导致元素的延迟时间已经过去，但是还没有被取出。</p></li></ul> <h5 id="synchronousqueue代码示例"><a href="#synchronousqueue代码示例" class="header-anchor">#</a> SynchronousQueue代码示例</h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 生产者线程</span>
        <span class="token class-name">Thread</span> producer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;秀逗&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;二哈&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;四眼&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> item <span class="token operator">:</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;放入队列: &quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    queue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻塞直到有消费者取走该元素</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 消费者线程</span>
        <span class="token class-name">Thread</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">String</span> item <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻塞直到有生产者放入一个元素</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;拿出消费: &quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        producer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        consumer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            producer<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            consumer<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre></div><h5 id="linkedtransferqueue代码示例"><a href="#linkedtransferqueue代码示例" class="header-anchor">#</a> LinkedTransferQueue代码示例</h5> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">TransferQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedTransferQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建生产者线程1 (使用 transfer)</span>
        <span class="token class-name">Thread</span> producer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;transfer-1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;transfer-2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;transfer-3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> item <span class="token operator">:</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者1 生产消息 并 transfer：&quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    queue<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者1 transfer 完成：&quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建生产者线程2 (使用 put)</span>
        <span class="token class-name">Thread</span> producer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;put-1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;put-2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;put-3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> item <span class="token operator">:</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者2 生产消息 并 put：&quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    queue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者2 put 完成：&quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建消费者线程</span>
        <span class="token class-name">Thread</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 模拟消费者处理消息的延迟</span>
                    <span class="token class-name">String</span> item <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消费者 消费消息： &quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 启动生产者和消费者线程</span>
        consumer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        producer1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        producer2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 等待线程完成</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            producer1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            producer2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            consumer<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

</code></pre></div><h4 id="_7-6、利用双端队列实现栈"><a href="#_7-6、利用双端队列实现栈" class="header-anchor">#</a> 7.6、利用双端队列实现栈</h4> <p>代码示例：
使用LinkedList或者ArrayDeque可以很方便的实现栈的功能。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">StackOne</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

<span class="token comment">//    // ================ LinkedList实现栈 ===========</span>
    <span class="token keyword">private</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">StackOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ================ ArrayDeque实现栈 ===========</span>
<span class="token comment">//    private ArrayDeque&lt;T&gt; list;</span>
<span class="token comment">//    public StackOne() {</span>
<span class="token comment">//        this.list = new ArrayDeque&lt;&gt;();</span>
<span class="token comment">//    }</span>


    <span class="token comment">/**
     * 往栈中添加元素
     * @param value 元素
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        list<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @return 移除栈顶元素
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;Stack is empty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * @return 返回栈顶元素
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;Stack is empty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 判断栈是否为空
     * @return true:空   false：非空
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @return 栈的元素个数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="八、常见的线程安全集合"><a href="#八、常见的线程安全集合" class="header-anchor">#</a> 八、常见的线程安全集合</h2> <p>这里先大致留个印象，后面会深入分析比较有代表性的集合实现细节。</p> <table><tr><th>类型</th> <th>名称</th> <th>适用场景</th></tr> <tr><td rowspan="1" bgcolor="white">线程安全的List</td> <td>CopyOnWriteArrayList</td> <td>适用于读多写少的场景[实际上写多的场景用也可以，尾插的时间复杂度是O(1)]</td></tr> <tr><td rowspan="1">线程安全的Set</td> <td>CopyOnWriteArraySet</td> <td>适用于读多写少的场景</td></tr> <tr><td rowspan="1" bgcolor="white">线程安全的Map</td> <td>ConcurrentHashMap</td> <td>适用于高并发的场景，读操作和部分写操作不需要加锁，性能较好</td></tr> <tr><td rowspan="4">线程安全的Queue</td> <td>LinkedBlockingQueue</td> <td>适用于生产者消费者模式，支持阻塞式的生产者消费者通信</td></tr> <tr><td>ArrayBlockingQueue</td> <td>适用于固定容量的阻塞队列，生产者消费者线程间的同步和通信</td></tr> <tr><td>ConcurrentLinkedQueue</td> <td>适用于高并发的无界队列，非阻塞式的线程安全队列</td></tr> <tr><td>PriorityBlockingQueue</td> <td>适用于优先级队列，支持按优先级顺序存取元素</td></tr></table> <h2 id="九、集合的适用场景总结"><a href="#九、集合的适用场景总结" class="header-anchor">#</a> 九、集合的适用场景总结</h2> <p>集合这个模块需要大量的实践，这里只做简单总结</p> <table><tr><th>类型</th> <th>名称</th> <th>适用场景</th></tr> <tr><td rowspan="4" bgcolor="white">List</td> <td>ArrayList</td> <td>非线程安全，适用于读多写多，快速随机访问的场景(基本上都是尾插写多的场景用的也很多，用的最多的集合之一</td></tr> <tr><td>LinkedList</td> <td>适用于频繁插入、删除操作的场景(实际上用的很少[我个人很少用]，即使是用队列的功能也是ArrayDueue用的多)</td></tr> <tr><td>CopyOnWriteArrayList</td> <td>适用于读多写少的线程安全场景(实际上用尾插，写也很快，除非随机写，但是随机写的场景很少)</td></tr> <tr><td>Vector</td> <td>适用于需要线程安全的场景，别用这个，用CopyOnWriteArrayList代替即可</td></tr> <tr><td rowspan="4">Set</td> <td>HashSet</td> <td>适用于快速查找和去重的场景 （快速查找可以理解为 contains方法，用的最多的集合之一）</td></tr> <tr><td>LinkedHashSet</td> <td>适用于需要维护插入顺序，且去重的场景</td></tr> <tr><td>TreeSet</td> <td>适用于需要自定义排序的场景</td></tr> <tr><td>CopyOnWriteArraySet</td> <td>适用于读多写少的线程安全场景</td></tr> <tr><td rowspan="4" bgcolor="white">Map</td> <td>HashMap</td> <td>适用于快速查找键值对的场景（用的最多的集合之一）</td></tr> <tr><td>LinkedHashMap</td> <td>适用于需要维护插入顺序的场景</td></tr> <tr><td>TreeMap</td> <td>适用于需要排序的键值对的场景</td></tr> <tr><td>ConcurrentHashMap</td> <td>适用于高并发的场景，读操作和部分写操作不需要加锁，性能较好</td></tr> <tr><td rowspan="9">Queue</td> <td>LinkedList</td> <td>非线程安全，适用于实现双端队列或栈的场景</td></tr> <tr><td>PriorityQueue</td> <td>非线程安全，适用于需要优先级排序的场景</td></tr> <tr><td>ArrayDeque</td> <td>非线程安全，适用于需要双端队列的场景</td></tr> <tr><td>LinkedBlockingQueue</td> <td>线程安全，适用于生产者消费者模式，支持阻塞式的生产者消费者通信</td></tr> <tr><td>ArrayBlockingQueue</td> <td>线程安全，适用于固定容量的阻塞队列，生产者消费者线程间的同步和通信</td></tr> <tr><td>ConcurrentLinkedQueue</td> <td>线程安全，适用于高并发的无界队列，非阻塞式的线程安全队列</td></tr> <tr><td>PriorityBlockingQueue</td> <td>线程安全，适用于优先级队列，支持按优先级顺序存取元素</td></tr> <tr><td>DelayQueue</td> <td>线程安全，适用于需要延迟处理的任务，例如定时任务调度(适用于比较简单的延时处理)</td></tr> <tr><td>SynchronousQueue</td> <td>线程安全，适用于不存储元素的场景，生产者必须等待消费者接受元素</td></tr></table> <h2 id="补充"><a href="#补充" class="header-anchor">#</a> 补充</h2> <h3 id="列表、哈希表、栈、队列、双向队列、阻塞队列基本方法参考"><a href="#列表、哈希表、栈、队列、双向队列、阻塞队列基本方法参考" class="header-anchor">#</a> 列表、哈希表、栈、队列、双向队列、阻塞队列基本方法参考</h3> <p>为了防止混乱这里对表、哈希表、栈、队列、双向队列、阻塞队列的一些常用基本方法列出以供参考</p> <table><thead><tr><th>Collection</th> <th>Method</th> <th>Description</th> <th>Throws Exception</th></tr></thead> <tbody><tr><td rowspan="6"><strong>List</strong></td> <td><code>add(E e)</code></td> <td>添加元素到列表末尾，返回 <code>true</code></td> <td>无</td></tr> <tr><td><code>add(int index, E element)</code></td> <td>在指定位置插入元素</td> <td><code>IndexOutOfBoundsException</code></td></tr> <tr><td><code>get(int index)</code></td> <td>获取指定位置的元素</td> <td><code>IndexOutOfBoundsException</code></td></tr> <tr><td><code>remove(int index)</code></td> <td>移除指定位置的元素</td> <td><code>IndexOutOfBoundsException</code></td></tr> <tr><td><code>set(int index, E element)</code></td> <td>替换指定位置的元素</td> <td><code>IndexOutOfBoundsException</code></td></tr> <tr><td><code>contains(Object o)</code></td> <td>判断列表是否包含指定元素</td> <td>无</td></tr> <tr><td rowspan="5"><strong>Map</strong></td> <td><code>put(K key, V value)</code></td> <td>插入键值对，返回之前关联的值</td> <td>无</td></tr> <tr><td><code>get(Object key)</code></td> <td>获取指定键的值</td> <td>无</td></tr> <tr><td><code>remove(Object key)</code></td> <td>移除指定键的键值对</td> <td>无</td></tr> <tr><td><code>containsKey(Object key)</code></td> <td>判断是否包含指定键</td> <td>无</td></tr> <tr><td><code>containsValue(Object value)</code></td> <td>判断是否包含指定值</td> <td>无</td></tr> <tr><td rowspan="3"><strong>Stack</strong></td> <td><code>push(E item)</code></td> <td>压入元素到栈顶</td> <td>无</td></tr> <tr><td><code>pop()</code></td> <td>移除并返回栈顶元素</td> <td><code>EmptyStackException</code></td></tr> <tr><td><code>peek()</code></td> <td>返回栈顶元素但不移除</td> <td><code>EmptyStackException</code></td></tr> <tr><td rowspan="6"><strong>Queue</strong></td> <td><code>add(E e)</code></td> <td>添加元素到队列末尾，若队列已满抛异常</td> <td><code>IllegalStateException</code></td></tr> <tr><td><code>offer(E e)</code></td> <td>添加元素到队列末尾，返回 <code>true</code> 或 <code>false</code></td> <td>无</td></tr> <tr><td><code>remove()</code></td> <td>移除并返回队列头部元素</td> <td><code>NoSuchElementException</code></td></tr> <tr><td><code>poll()</code></td> <td>移除并返回队列头部元素，若队列为空返回 <code>null</code></td> <td>无</td></tr> <tr><td><code>element()</code></td> <td>返回队列头部元素但不移除</td> <td><code>NoSuchElementException</code></td></tr> <tr><td><code>peek()</code></td> <td>返回队列头部元素但不移除，若队列为空返回 <code>null</code></td> <td>无</td></tr> <tr><td rowspan="12"><strong>Deque</strong></td> <td><code>addFirst(E e)</code></td> <td>添加元素到双端队列的开头</td> <td>无</td></tr> <tr><td><code>addLast(E e)</code></td> <td>添加元素到双端队列的末尾</td> <td>无</td></tr> <tr><td><code>offerFirst(E e)</code></td> <td>添加元素到双端队列的开头，返回 <code>true</code> 或 <code>false</code></td> <td>无</td></tr> <tr><td><code>offerLast(E e)</code></td> <td>添加元素到双端队列的末尾，返回 <code>true</code> 或 <code>false</code></td> <td>无</td></tr> <tr><td><code>removeFirst()</code></td> <td>移除并返回双端队列的开头元素</td> <td><code>NoSuchElementException</code></td></tr> <tr><td><code>removeLast()</code></td> <td>移除并返回双端队列的末尾元素</td> <td><code>NoSuchElementException</code></td></tr> <tr><td><code>pollFirst()</code></td> <td>移除并返回双端队列的开头元素，若为空返回 <code>null</code></td> <td>无</td></tr> <tr><td><code>pollLast()</code></td> <td>移除并返回双端队列的末尾元素，若为空返回 <code>null</code></td> <td>无</td></tr> <tr><td><code>getFirst()</code></td> <td>返回双端队列的开头元素但不移除</td> <td><code>NoSuchElementException</code></td></tr> <tr><td><code>getLast()</code></td> <td>返回双端队列的末尾元素但不移除</td> <td><code>NoSuchElementException</code></td></tr> <tr><td><code>peekFirst()</code></td> <td>返回双端队列的开头元素但不移除，若为空返回 <code>null</code></td> <td>无</td></tr> <tr><td><code>peekLast()</code></td> <td>返回双端队列的末尾元素但不移除，若为空返回 <code>null</code></td> <td>无</td></tr> <tr><td rowspan="10"><strong>BlockingQueue</strong></td> <td><code>add(E e)</code></td> <td>添加元素到队列末尾，若队列已满抛异常</td> <td><code>IllegalStateException</code></td></tr> <tr><td><code>offer(E e)</code></td> <td>尝试添加元素到队列末尾，返回 <code>true</code> 或 <code>false</code></td> <td>无</td></tr> <tr><td><code>offer(E e, long timeout, TimeUnit unit)</code></td> <td>尝试添加元素到队列末尾，在超时时间内等待</td> <td><code>InterruptedException</code></td></tr> <tr><td><code>put(E e)</code></td> <td>添加元素到队列末尾，若队列已满则等待</td> <td><code>InterruptedException</code></td></tr> <tr><td><code>take()</code></td> <td>移除并返回队列头部元素，若队列为空则等待</td> <td><code>InterruptedException</code></td></tr> <tr><td><code>poll(long timeout, TimeUnit unit)</code></td> <td>移除并返回队列头部元素，在超时时间内等待</td> <td><code>InterruptedException</code></td></tr> <tr><td><code>remainingCapacity()</code></td> <td>返回队列剩余的容量</td> <td>无</td></tr> <tr><td><code>drainTo(Collection&lt;? super E&gt; c)</code></td> <td>移除所有可用元素到指定集合</td> <td>无</td></tr> <tr><td><code>drainTo(Collection&lt;? super E&gt; c, int maxElements)</code></td> <td>移除最多指定数量的可用元素到指定集合</td> <td>无</td></tr> <tr><td><code>clear()</code></td> <td>移除所有元素</td> <td>无</td></tr></tbody></table></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/javabase/十五、JDK21新特性.html" class="prev">
          4、JDK21新特性
        </a></span> <span class="next"><a href="/blog/java-collection/二、ArrayList详解.html">
          二、ArrayList详解
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#一、图解集合的继承体系-图片来源" class="sidebar-link reco-side-一、图解集合的继承体系-图片来源" data-v-b57cc07c>一、图解集合的继承体系？（图片来源）</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#二、list-set-map三者的区别" class="sidebar-link reco-side-二、list-set-map三者的区别" data-v-b57cc07c>二、List,Set,Map三者的区别？</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#三、list接口的实现" class="sidebar-link reco-side-三、list接口的实现" data-v-b57cc07c>三、List接口的实现</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_3-1、arraylist-、-linkedlist、vector" class="sidebar-link reco-side-_3-1、arraylist-、-linkedlist、vector" data-v-b57cc07c>3.1、Arraylist 、 LinkedList、Vector</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_3-2、arraylist-、-linkedlist、vector-三者的区别" class="sidebar-link reco-side-_3-2、arraylist-、-linkedlist、vector-三者的区别" data-v-b57cc07c>3.2、Arraylist 、 LinkedList、Vector 三者的区别?</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_3-3、对randomaccess接口的理解" class="sidebar-link reco-side-_3-3、对randomaccess接口的理解" data-v-b57cc07c>3.3、对RandomAccess接口的理解</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#四、set接口的实现" class="sidebar-link reco-side-四、set接口的实现" data-v-b57cc07c>四、Set接口的实现</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_4-1、hashset、linkedhashset、treeset" class="sidebar-link reco-side-_4-1、hashset、linkedhashset、treeset" data-v-b57cc07c>4.1、HashSet、LinkedHashSet、TreeSet</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_4-2、hashset、linkedhashset-、-treeset-三者的区别" class="sidebar-link reco-side-_4-2、hashset、linkedhashset-、-treeset-三者的区别" data-v-b57cc07c>4.2、HashSet、LinkedHashSet 、 TreeSet 三者的区别？</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_4-3、hashset如何检查重复" class="sidebar-link reco-side-_4-3、hashset如何检查重复" data-v-b57cc07c>4.3、HashSet如何检查重复</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#五、map接口的实现" class="sidebar-link reco-side-五、map接口的实现" data-v-b57cc07c>五、Map接口的实现</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_5-1、hashmap、linkedhashmap、treemap、hashtable" class="sidebar-link reco-side-_5-1、hashmap、linkedhashmap、treemap、hashtable" data-v-b57cc07c>5.1、HashMap、LinkedHashMap、TreeMap、Hashtable</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_5-2、hashmap、linkedhashmap、treemap、hashtable对比" class="sidebar-link reco-side-_5-2、hashmap、linkedhashmap、treemap、hashtable对比" data-v-b57cc07c>5.2、HashMap、LinkedHashMap、TreeMap、Hashtable对比</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_5-3、map的五种遍历方式" class="sidebar-link reco-side-_5-3、map的五种遍历方式" data-v-b57cc07c>5.3、Map的五种遍历方式</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#六、用comparator和comparable进行自定义排序" class="sidebar-link reco-side-六、用comparator和comparable进行自定义排序" data-v-b57cc07c>六、用Comparator和Comparable进行自定义排序</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#七、queue、deque、blockingqueue接口的实现" class="sidebar-link reco-side-七、queue、deque、blockingqueue接口的实现" data-v-b57cc07c>七、Queue、Deque、BlockingQueue接口的实现</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_7-1、queue-、-deque、blockingqueue-接口的区别" class="sidebar-link reco-side-_7-1、queue-、-deque、blockingqueue-接口的区别" data-v-b57cc07c>7.1、Queue 、 Deque、BlockingQueue 接口的区别</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_7-2、linkedlist-、arraydeque、priorityqueue" class="sidebar-link reco-side-_7-2、linkedlist-、arraydeque、priorityqueue" data-v-b57cc07c>7.2、LinkedList 、ArrayDeque、PriorityQueue</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_7-3、linkedlist-、arraydeque、priorityqueue对比" class="sidebar-link reco-side-_7-3、linkedlist-、arraydeque、priorityqueue对比" data-v-b57cc07c>7.3、LinkedList 、ArrayDeque、PriorityQueue对比</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_7-4、blockingqueue的实现" class="sidebar-link reco-side-_7-4、blockingqueue的实现" data-v-b57cc07c>7.4、BlockingQueue的实现</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#_7-5、代码示例" class="sidebar-link reco-side-_7-5、代码示例" data-v-b57cc07c>7.5、代码示例</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#八、常见的线程安全集合" class="sidebar-link reco-side-八、常见的线程安全集合" data-v-b57cc07c>八、常见的线程安全集合</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#九、集合的适用场景总结" class="sidebar-link reco-side-九、集合的适用场景总结" data-v-b57cc07c>九、集合的适用场景总结</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#补充" class="sidebar-link reco-side-补充" data-v-b57cc07c>补充</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/java-collection/%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0.html#列表、哈希表、栈、队列、双向队列、阻塞队列基本方法参考" class="sidebar-link reco-side-列表、哈希表、栈、队列、双向队列、阻塞队列基本方法参考" data-v-b57cc07c>列表、哈希表、栈、队列、双向队列、阻塞队列基本方法参考</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/blog/assets/js/app.bee84098.js" defer></script><script src="/blog/assets/js/7.efdd77fe.js" defer></script><script src="/blog/assets/js/2.b9e7c59d.js" defer></script><script src="/blog/assets/js/1.41a6ef86.js" defer></script><script src="/blog/assets/js/40.59830a9f.js" defer></script>
  </body>
</html>
